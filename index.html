
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Local Measure API</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.svg" class="logo" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#use-cases" class="toc-h2 toc-link" data-title="Use Cases">Use Cases</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#header" class="toc-h2 toc-link" data-title="Header">Header</a>
                  </li>
                  <li>
                    <a href="#parameter" class="toc-h2 toc-link" data-title="Parameter">Parameter</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#identify" class="toc-h1 toc-link" data-title="Identify">Identify</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-request" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
                  <li>
                    <a href="#body-parameters" class="toc-h2 toc-link" data-title="Body Parameters">Body Parameters</a>
                  </li>
                  <li>
                    <a href="#traits" class="toc-h2 toc-link" data-title="Traits">Traits</a>
                  </li>
                  <li>
                    <a href="#reserved-traits" class="toc-h2 toc-link" data-title="Reserved Traits">Reserved Traits</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#geo-location" class="toc-h1 toc-link" data-title="Geo-Location">Geo-Location</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-request-2" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
                  <li>
                    <a href="#frequency" class="toc-h2 toc-link" data-title="Frequency">Frequency</a>
                  </li>
                  <li>
                    <a href="#body-parameters-2" class="toc-h2 toc-link" data-title="Body Parameters">Body Parameters</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#geo-venue" class="toc-h1 toc-link" data-title="Geo-Venue">Geo-Venue</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-request-3" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
                  <li>
                    <a href="#frequency-2" class="toc-h2 toc-link" data-title="Frequency">Frequency</a>
                  </li>
                  <li>
                    <a href="#body-parameters-3" class="toc-h2 toc-link" data-title="Body Parameters">Body Parameters</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://dashboard.getlocalmeasure.com/account/?tab=plugins'>Sign Up for a Key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='overview'>Overview</h1>
<p>Create rich profiles of your customers by sending customer data from your external data sources. This API is used to identify customers and create activities within those customers profiles in Local Measure.</p>
<h2 id='use-cases'>Use Cases</h2><h3 id='wi-fi-splash-pages-amp-captive-portals'>Wi-Fi splash pages &amp; captive portals</h3>
<p>If you are using social media or email sign-in on a splash page or website you can use the API to send identities which creates or updates customer profiles within Local Measure.</p>
<h3 id='wi-fi-location-analytics'>Wi-Fi location analytics</h3>
<p>Use the API to create customer profiles and update the customers visit history automatically using the Wi-Fi device location analytics. Visit history powers more relevant search plus automated rules and alerts for repeat visitors.</p>
<h3 id='arrival-reporting-from-hotel-pmss'>Arrival reporting from hotel PMSs</h3>
<p>Send arrivals reports into Local Measure by sending guest identities and arrival &amp; departure dates. Include custom fields such as rate codes, special services, package codes etc to provide more detailed contect for the operational teams using Local Measure.</p>
<h3 id='loyalty-amp-custom-profile-data'>Loyalty &amp; custom profile data</h3>
<p>When identifying a customer in the Local Measure API you are able to send custom fields which give a profile more context and power more sophisticated automations and alerting rules. Creating custom fields such as loyalty level and loyalty ID enable your teams to deliver the right level of service to your guests.</p>
<h3 id='link-your-crm-to-local-measure-customer-profiles'>Link your CRM to Local Measure Customer Profiles</h3>
<p>We enable you to create a link between customer/guest records in your own CRM or PMS with the Local Measure. Using a customer customer identifier or custom fields you can search and link records between systems.</p>

<aside class="notice">
Use of the API is for customers using the Customer Profiles Add-On. Speak to your Account Manager for more information.
</aside>
<h1 id='authentication'>Authentication</h1>
<p>The Local Measure API uses an API key to authenticate access to the API and map data to the correct account. It is available at <code>https://public-api.getlocalmeasure.com/</code>.</p>

<p>Local Measure expects an API key in all API requests. We support two methods of sending the API key: HTTP Headers or via a url parameter.</p>
<h3 id='header'>Header</h3>
<p>Include an <code>Authorisation</code> header in your HTTP request with your API key</p>

<p><code>Authorization: your-api-key</code></p>
<h3 id='parameter'>Parameter</h3>
<p>Include the <code>access_token</code> parameter in your HTTP uri with your API key as the value</p>

<p><code>https://public-api.getlocalmeasure.com/v1/endpoint?access_token=your-api-key</code></p>

<p>You can register a new Local Measure API key in our <a href="http://dashboard.getlocalmeasure.com/account/?tab=plugins">plugin portal</a>.</p>
<h1 id='identify'>Identify</h1>
<p>Identify a customer to Local Measure by calling this endpoint. A customer profile will be created or updated based on the fields provided.</p>

<p>Customer profiles are updated when a matching profile is found based on the following precedence criteria:</p>

<ul>
<li>customer_id</li>
<li>email</li>
<li>profiles.source_id</li>
</ul>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /v1/identify</code></p>

<blockquote>
<p>Example payload:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00:14:22:01:23:45"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"profiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"facebook"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"87235872"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://facebook.com/john.smith.478653"</span><span class="p">,</span><span class="w">
    </span><span class="p">},{</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"instagram"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"245986569842"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://instagram.com/johnsmith/"</span><span class="p">,</span><span class="w">
    </span><span class="p">},{</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"twitter"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"72735729779824"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://twitter.com/johnnysmiddy/"</span><span class="p">,</span><span class="w">
    </span><span class="p">},{</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"salesforce"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"37461828371"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://salesforce.com/customer/abc123"</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="s2">"traits"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@gmail.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"loyalty_level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Elite Plus"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"loyalty_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AU8759342"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"birthdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1974-08-01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"male"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"marketing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>On success of this request it will return a 200 and JSON with a link back to the profile inside Local Measure like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.getlocalmeasure.com/customers/1787201767960751/profile"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='body-parameters'>Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_id</td>
<td>string</td>
<td>true</td>
<td>An identifier for the customer. If you dont have one you can use their device mac or email address instead.</td>
</tr>
<tr>
<td>profiles</td>
<td>array</td>
<td>false</td>
<td>An array of other social/crm profiles to link with</td>
</tr>
<tr>
<td>profiles.source</td>
<td>string</td>
<td>true</td>
<td>The name of the social/crm platform where this profile comes from.</td>
</tr>
<tr>
<td>profiles.source_id</td>
<td>string</td>
<td>true</td>
<td>The customers ids on the social/crm platform id i.e. Facebook id (71485571121)</td>
</tr>
<tr>
<td>profiles.link</td>
<td>string</td>
<td>false</td>
<td>A link to the customers social profile</td>
</tr>
<tr>
<td>traits</td>
<td>object</td>
<td>false</td>
<td>An object of traits.</td>
</tr>
</tbody></table>
<h3 id='traits'>Traits</h3>
<p>Traits are pieces of information you know about a user that are included in an identify call. These could be demographics like age or gender, or loyalty information.</p>
<h3 id='reserved-traits'>Reserved Traits</h3>
<p>We&#39;ve reserved some traits that have meanings for users and they are handled in special ways.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td>true</td>
<td>First name of the customer</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>true</td>
<td>Last name of the customer</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>false</td>
<td>The email of the customer</td>
</tr>
<tr>
<td>marketing_consent</td>
<td>boolean</td>
<td>false</td>
<td>Whether the customer gives consent to receive marketing material</td>
</tr>
<tr>
<td>birthdate</td>
<td>string</td>
<td>false</td>
<td>The birthdate of the customer in the format YYYY-MM-DD</td>
</tr>
<tr>
<td>gender</td>
<td>string</td>
<td>false</td>
<td>The gender of the customer</td>
</tr>
<tr>
<td>avatar_image</td>
<td>string</td>
<td>false</td>
<td>An image representing the customer</td>
</tr>
<tr>
<td>bio</td>
<td>string</td>
<td>false</td>
<td>A breif description of the customer</td>
</tr>
<tr>
<td>hometown</td>
<td>string</td>
<td>false</td>
<td>The home town of the customer</td>
</tr>
<tr>
<td>link</td>
<td>string</td>
<td>false</td>
<td>A link to the original customer</td>
</tr>
<tr>
<td>website</td>
<td>string</td>
<td>false</td>
<td>The customers website</td>
</tr>
</tbody></table>

<aside class="notice">
Only use reserved traits for their intended purpose.
</aside>
<h1 id='geo-location'>Geo-Location</h1>
<p>The geo-location endpoint uses the device wi-fi position to automatically create and end visits in a customer profile.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<blockquote>
<p>Example payload:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00:14:22:01:23:45"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">151.20919</span><span class="p">,</span><span class="w">
    </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-33.88668</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seen_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-29T08:09:57Z"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Or Bulk Example payload:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00:14:22:01:23:45"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">151.20919</span><span class="p">,</span><span class="w">
    </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-33.88668</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seen_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-29T08:09:57Z"</span><span class="p">,</span><span class="w">
  </span><span class="p">},{</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00:13:00:AE:44:12"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">151.20980</span><span class="p">,</span><span class="w">
    </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-33.8899</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seen_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-29T08:09:57Z"</span><span class="p">,</span><span class="w">
  </span><span class="p">},{</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00:14:BC:00:22:11"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">151.20965</span><span class="p">,</span><span class="w">
    </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-33.88211</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seen_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-29T08:09:57Z"</span><span class="p">,</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span></code></pre>
<blockquote>
<p>On success of this request it will return a 200 and JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code>POST /v1/geolocation</code></p>
<h3 id='frequency'>Frequency</h3>
<p>We recommend sending location events regularly, every minute if possible.</p>

<p>When the customer geo-location is seen for the first time or after a previous exit we create a visit.
If we don&#39;t receive any location events for a device for a 30 minute period we will mark the customer visit as exited.</p>
<h3 id='body-parameters-2'>Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_id</td>
<td>string</td>
<td>true</td>
<td>A customer identifier of customer. If you dont have one you can use the persons device mac or email address instead.</td>
</tr>
<tr>
<td>longitude</td>
<td>float</td>
<td>true</td>
<td>Longitude of the identified device</td>
</tr>
<tr>
<td>latitude</td>
<td>float</td>
<td>true</td>
<td>Latitude of the identified device</td>
</tr>
<tr>
<td>seen_at</td>
<td>string</td>
<td>true</td>
<td>A datetime when the device was last seen. In the format of a RFC 3339 datetime ( 2017-11-29T08:09:57Z )</td>
</tr>
</tbody></table>

<aside class="notice">
Remember - To use this endpoint you will need to be authenticated and provide an existing customer identity using the identify endpoint first.
</aside>
<h1 id='geo-venue'>Geo-Venue</h1>
<p>The geo-venue endpoint uses the device venue or zone to automatically create and end visits in a customer profile.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<blockquote>
<p>Example payload:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00:14:22:01:23:45"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"venue_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FJHKL334"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Level 1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3 Drewberry Lane"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seen_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-29T08:09:57Z"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Or Bulk Example payload:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00:14:22:01:23:45"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"venue_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FJHKL334"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Level 1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3 Drewberry Lane"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seen_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-29T08:09:57Z"</span><span class="p">,</span><span class="w">
  </span><span class="p">},{</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00:13:00:AE:44:12"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"venue_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FJHKL336"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Level 3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3 Drewberry Lane"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seen_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-29T08:09:57Z"</span><span class="p">,</span><span class="w">
  </span><span class="p">},{</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00:14:BC:00:22:11"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"venue_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FJHKL338"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Level 5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3 Drewberry Lane"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seen_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-29T08:09:57Z"</span><span class="p">,</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span></code></pre>
<blockquote>
<p>On success of this request it will return a 200 and JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code>POST /v1/geovenue</code></p>
<h3 id='frequency-2'>Frequency</h3>
<p>We recommend sending venue events regularly, every minute if possible.</p>

<p>When the customer geo-venue is seen for the first time or after a previous exit we create a visit.
If we don&#39;t receive any venue events for a device for a 30 minute period we will mark the customer visit as exited.</p>
<h3 id='body-parameters-3'>Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_id</td>
<td>string</td>
<td>true</td>
<td>A customer identifier of customer. If you dont have one you can use the persons device mac or email address instead.</td>
</tr>
<tr>
<td>venue_id</td>
<td>string</td>
<td>true</td>
<td>A venue identifier.</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>true</td>
<td>The name of the venue or zone.</td>
</tr>
<tr>
<td>address</td>
<td>string</td>
<td>false</td>
<td>The address of the venue or zone.</td>
</tr>
<tr>
<td>seen_at</td>
<td>string</td>
<td>true</td>
<td>A datetime when the device was last seen. In the format of a RFC 3339 datetime ( 2017-11-29T08:09:57Z )</td>
</tr>
</tbody></table>

<aside class="notice">
Remember - To use this endpoint you will need to be authenticated and provide an existing customer identity using the identify endpoint first.
</aside>
<h1 id='errors'>Errors</h1>
<p>The Localmeasure API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request has fields which have invalid data in them.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is not correct.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified API could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a API endpoint with an invalid method.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting our API too many times! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
